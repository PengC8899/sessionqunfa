<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Telegram 群发控制面板</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <h1>Telegram 群发控制面板</h1>
    <div class="token-box">
      <label>管理员令牌</label>
      <input id="adminToken" type="password" placeholder="输入 X-Admin-Token" />
      <button id="saveToken">保存令牌</button>
      <button id="editToken" style="display:none;">编辑令牌</button>
      <span id="tokenStatus" style="margin-left:8px;"></span>
      <label style="margin-left:12px;">账号</label>
      <select id="accountSelect"></select>
    </div>
    <div class="login-box" style="margin-top:8px; display:flex; gap:8px; align-items:center;">
      <input id="loginPhone" type="text" placeholder="手机号(含国家码)" style="width:200px;" />
      <input id="loginCode" type="text" placeholder="验证码" style="width:100px;" />
      <input id="loginPassword" type="password" placeholder="二次密码(如有)" style="width:160px;" />
      <label><input id="forceSms" type="checkbox" /> 强制短信</label>
      <button id="sendCodeBtn">发送验证码</button>
      <button id="confirmLoginBtn">确认登录</button>
      <button id="unlockAccount" style="display:none;">更换账号/重新登录</button>
      <span id="authStatus" style="margin-left:8px;"></span>
    </div>
  </header>

  <main>
    <section class="left">
      <div class="search-box">
        <input id="searchInput" type="text" placeholder="搜索群名" />
        <div class="actions">
          <button id="selectAll">全选</button>
          <button id="clearAll">取消全选</button>
          <button id="refreshGroups">刷新群列表</button>
        </div>
      </div>
      <div class="row" style="margin-top:8px;">
        <label><input id="includeChannels" type="checkbox" /> 包含频道</label>
        <span id="groupCount" style="margin-left:12px;"></span>
      </div>
      <ul id="groupList"></ul>
    </section>

    <section class="right">
      <div class="form">
        <textarea id="message" rows="10" placeholder="输入要发送的消息"></textarea>
        <div class="row">
          <label>解析模式</label>
          <select id="parseMode">
            <option value="plain">plain</option>
            <option value="markdown">markdown</option>
            <option value="html">html</option>
          </select>
        </div>
        <div class="row">
          <label>每条间隔(ms)</label>
          <input id="delayMs" type="number" value="60000" min="60000" step="1000" />
        </div>
        <div class="row">
          <label><input id="disablePreview" type="checkbox" checked /> 关闭链接预览</label>
        </div>
        <div class="actions">
          <button id="sendBtn">发送到选中群组</button>
          <button id="testBtn">发送测试消息</button>
        </div>
        <div id="result" class="result"></div>
      </div>
      <div class="logs">
        <h2>最近日志</h2>
        <table>
          <thead>
            <tr>
              <th>时间</th>
              <th>账号</th>
              <th>群名</th>
              <th>状态</th>
              <th>消息ID</th>
              <th>错误</th>
            </tr>
          </thead>
          <tbody id="logsBody"></tbody>
        </table>
      </div>
      <div class="tasks" style="margin-top:16px;">
        <h2>任务列表</h2>
        <table>
          <thead>
            <tr>
              <th>任务ID</th>
              <th>账号</th>
              <th>状态</th>
              <th>进度</th>
              <th>开始</th>
              <th>结束</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="tasksBody"></tbody>
        </table>
        <div id="taskDetail" style="margin-top:8px;"></div>
      </div>
    </section>
  </main>

  <script src="/static/app.js"></script>
</body>
</html>
